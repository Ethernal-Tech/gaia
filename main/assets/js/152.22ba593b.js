(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{508:function(e,t,a){"use strict";a.r(t);var c=a(1),o=Object(c.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"icamauth-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#icamauth-module"}},[e._v("#")]),e._v(" Icamauth Module")]),e._v(" "),a("h2",{attrs:{id:"introduction-to-interchain-accounts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-interchain-accounts"}},[e._v("#")]),e._v(" Introduction to Interchain Accounts")]),e._v(" "),a("p",[a("strong",[e._v("Interchain Accounts")]),e._v(" (ICA) is a standard that allows an account on a "),a("em",[e._v("controller")]),e._v(" chain to create and securely control an address on a different "),a("em",[e._v("host")]),e._v(" chain using the Inter Blockchain Protocol (IBC). Transactions native to the host chain are wrapped inside an IBC packet and sent from the Interchain Account Owner on the controller chain to be executed on the host chain.")]),e._v(" "),a("p",[e._v("The benefit of ICA is that there is no need to create a custom IBC implementation for each unique transaction that a sovereign blockchain might have (trading on a DEX, executing a specific smart contract, etc.). Instead, a "),a("strong",[e._v("generic")]),e._v(" implementation allows blockchains to speak to each other, much like contracts can interact on Ethereum or other smart contract platforms.")]),e._v(" "),a("p",[e._v("For example, let's say that you have an address on the Cosmos Hub (the controller) with OSMO tokens that you want to stake on Osmosis (the host). With Interchain Accounts, you can create and control a new address on Osmosis without requiring a new private key. After sending your tokens to your Interchain Account using a regular IBC token transfer, you can send a wrapped "),a("code",[e._v("delegate")]),e._v(" transaction over IBC, which will then be unwrapped and executed natively on Osmosis.")]),e._v(" "),a("h2",{attrs:{id:"the-icamauth-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-icamauth-module"}},[e._v("#")]),e._v(" The icamauth module")]),e._v(" "),a("p",[e._v("Blockchains implementing Interchain Accounts can decide which messages they allow a controller chain to execute via a whitelist. The "),a("strong",[e._v("icamuath (interchain account message authentication) module")]),e._v(" whitelists most of the message types available to the Cosmos Hub, allowing any account on a controller chain to interact with the Cosmos Hub as if owning a native account on the chain itself.\nThe following command allows you to query all the allowed message types on a host chain:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcSBpbnRlcmNoYWluLWFjY291bnRzIGhvc3QgcGFyYW1zCg=="}}),e._v(" "),a("p",[e._v("The following tutorial will demonstrate how to use Interchain Accounts through the "),a("a",{attrs:{href:"../../x/icamauth"}},[e._v("icamauth module")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"setup-preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-preparation"}},[e._v("#")]),e._v(" Setup preparation")]),e._v(" "),a("p",[e._v("We will run two Cosmos-SDK chains (controller chain: "),a("code",[e._v("test-0")]),e._v(" and host chain: "),a("code",[e._v("test-1")]),e._v(") and a relayer to connect these two chains. We will create an account on chain "),a("code",[e._v("test-0")]),e._v(" and call it "),a("code",[e._v("alice")]),e._v(", and register an Interchain Account (that we'll call "),a("code",[e._v("alice_ica")]),e._v(")  on chain "),a("code",[e._v("test-1")]),e._v(" for "),a("code",[e._v("alice")]),e._v(" on chain "),a("code",[e._v("test-0")]),e._v(". We will also create a standard account, "),a("code",[e._v("bob")]),e._v(" on chain "),a("code",[e._v("test-1")]),e._v(".")]),e._v(" "),a("p",[e._v("Through these 3 accounts, we can test if:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("alice")]),e._v(" on chain "),a("code",[e._v("test-0")]),e._v(" can control its "),a("code",[e._v("alice_ica")]),e._v(" to transfer tokens to account "),a("code",[e._v("bob")]),e._v(" on chain "),a("code",[e._v("test-1")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("alice")]),e._v(" can control its "),a("code",[e._v("alice_ica")]),e._v(" to transfer "),a("code",[e._v("alice_ica")]),e._v("'s token back to "),a("code",[e._v("alice")]),e._v(" using a regular IBC token transfer.")])]),e._v(" "),a("h3",{attrs:{id:"prepare-to-run-two-chains"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepare-to-run-two-chains"}},[e._v("#")]),e._v(" Prepare to run two chains")]),e._v(" "),a("p",[e._v("We've simplified the setup process via several shell scripts. If you'd like to learn more about what's happening under the hood we suggest you inspect the files more closely.")]),e._v(" "),a("p",[e._v("Set up the two chains by "),a("a",{attrs:{href:"https://github.com/cosmos/gaia/blob/main/docs/modules/icamauth_scripts/init_chain_controller.sh",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("init_chain_controller.sh")]),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://github.com/cosmos/gaia/blob/main/docs/modules/icamauth_scripts/init_chain_host.sh",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("init_chain_host.sh")]),a("OutboundLink")],1),e._v(", create the keys for "),a("code",[e._v("alice")]),e._v(" and "),a("code",[e._v("bob")]),e._v(", and start running both chains in different terminals:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Y2QgZ2FpYQoKc291cmNlIC4vZG9jcy9tb2R1bGVzL2ljYW1hdXRoX3NjcmlwdHMvaW5pdF9jaGFpbl9jb250cm9sbGVyLnNoCg=="}}),e._v(" "),a("p",[e._v("and in another terminal:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Y2QgZ2FpYQoKc291cmNlIC4vZG9jcy9tb2R1bGVzL2ljYW1hdXRoX3NjcmlwdHMvaW5pdF9jaGFpbl9ob3N0LnNoCg=="}}),e._v(" "),a("h3",{attrs:{id:"setting-up-a-hermes-relayer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-a-hermes-relayer"}},[e._v("#")]),e._v(" Setting up a Hermes relayer")]),e._v(" "),a("p",[e._v("You can download or build the Hermes binary from the source code.")]),e._v(" "),a("h4",{attrs:{id:"download-the-hermes-binary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#download-the-hermes-binary"}},[e._v("#")]),e._v(" Download the Hermes binary")]),e._v(" "),a("p",[e._v("You can find the hermes download information for different os architectures "),a("a",{attrs:{href:"https://github.com/informalsystems/hermes/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Y3VybCAtT0wgaHR0cHM6Ly9naXRodWIuY29tL2luZm9ybWFsc3lzdGVtcy9oZXJtZXMvcmVsZWFzZXMvZG93bmxvYWQvdjEuMC4wL2hlcm1lcy12MS4wLjAteDg2XzY0LWFwcGxlLWRhcndpbi56aXAKbWtkaXIgLXAgJEhPTUUvLmhlcm1lcy9iaW4KdGFyIC1DICRIT01FLy5oZXJtZXMvYmluLyAtdnh6ZiBoZXJtZXMtdjEuMC4wLXg4Nl82NC1hcHBsZS1kYXJ3aW4uemlwCmV4cG9ydCBQQVRIPSZxdW90OyRIT01FLy5oZXJtZXMvYmluOiRQQVRIJnF1b3Q7Cg=="}}),e._v(" "),a("h4",{attrs:{id:"build-the-hermes-binary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-the-hermes-binary"}},[e._v("#")]),e._v(" Build the Hermes binary")]),e._v(" "),a("p",[e._v("Install Rust:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Y3VybCAtLXByb3RvICc9aHR0cHMnIC0tdGxzdjEuMiAtc1NmIGh0dHBzOi8vc2gucnVzdHVwLnJzIHwgc2gKc291cmNlICRIT01FLy5jYXJnby9lbnYK"}}),e._v(" "),a("p",[e._v("Build the Hermes binary:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmZvcm1hbHN5c3RlbXMvaWJjLXJzLmdpdApjZCBpYmMtcnMKZ2l0IGNoZWNrb3V0IHYxLjAuMApjYXJnbyBidWlsZCAtLXJlbGVhc2UgLS1uby1kZWZhdWx0LWZlYXR1cmVzIC0tYmluIGhlcm1lcwojIGJpbmFyeSBwYXRoOiAuL3RhcmdldC9yZWxlYXNlL2hlcm1lcwpjcCAgLi90YXJnZXQvcmVsZWFzZS9oZXJtZXMgJEhPTUUvLmNhcmdvL2JpbgpleHBvcnQgUEFUSD0mcXVvdDskSE9NRS8uaGVybWVzL2JpbjokUEFUSCZxdW90Owo="}}),e._v(" "),a("h4",{attrs:{id:"create-the-ibc-connection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-the-ibc-connection"}},[e._v("#")]),e._v(" Create the IBC connection")]),e._v(" "),a("p",[e._v("Run the following script "),a("a",{attrs:{href:"https://github.com/cosmos/gaia/blob/main/docs/modules/icamauth_scripts/hermes_setup.sh",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("gaia/docs/modules/icamauth_scripts/hermes_setup.sh")]),a("OutboundLink")],1),e._v(" to create an IBC connection:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Y2QgLi9kb2NzL21vZHVsZXMvaWNhbWF1dGhfc2NyaXB0cwpzb3VyY2UgaGVybWVzX3NldHVwLnNoCg=="}}),e._v(" "),a("h2",{attrs:{id:"testing-the-interchain-accounts-functionality"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#testing-the-interchain-accounts-functionality"}},[e._v("#")]),e._v(" Testing the Interchain Accounts functionality")]),e._v(" "),a("p",[e._v("First of all, you need to register an Interchain Account on "),a("code",[e._v("test-1")]),e._v(" for "),a("code",[e._v("alice")]),e._v(" by sending an "),a("code",[e._v("icamauth register")]),e._v(" command signed by "),a("code",[e._v("alice")]),e._v(" on the "),a("code",[e._v("test-0")]),e._v(" chain:")]),e._v(" "),a("p",[e._v("Open a new terminal and add the following variables.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"ZXhwb3J0IEhPTUUwPSRIT01FL3Rlc3QtMApleHBvcnQgSE9NRTE9JEhPTUUvdGVzdC0xCg=="}}),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgdHggaWNhbWF1dGggcmVnaXN0ZXIgLS1mcm9tIGFsaWNlIC0tY29ubmVjdGlvbi1pZCBjb25uZWN0aW9uLTAgLS1nYXMtcHJpY2VzIDAuNHN0YWtlIC0taG9tZSAkSE9NRTAK"}}),e._v(" "),a("p",[e._v("query alice's ica:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcXVlcnkgaWNhbWF1dGggaW50ZXJjaGFpbmFjY291bnRzIGNvbm5lY3Rpb24tMCAgJChnYWlhZCBrZXlzIHNob3cgYWxpY2UgLWEgLS1ob21lICRIT01FMCkgLS1ob21lICRIT01FMAo="}}),e._v(" "),a("p",[e._v("To make things easier during the next steps, export the account addresses to environment variables:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"ZXhwb3J0IEFMSUNFX0lDQT0kKGdhaWFkIHF1ZXJ5IGljYW1hdXRoIGludGVyY2hhaW5hY2NvdW50cyBjb25uZWN0aW9uLTAgICQoZ2FpYWQga2V5cyBzaG93IGFsaWNlIC1hIC0taG9tZSAkSE9NRTApIC0taG9tZSAkSE9NRTAgLW8ganNvbiB8IGpxIC1yICcuaW50ZXJjaGFpbl9hY2NvdW50X2FkZHJlc3MnKQpleHBvcnQgQUxJQ0U9JChnYWlhZCBrZXlzIHNob3cgYWxpY2UgLWEgLS1ob21lICRIT01FMCkKZXhwb3J0IEJPQj0kKGdhaWFkIGtleXMgc2hvdyBib2IgLWEgLS1ob21lICRIT01FMSkK"}}),e._v(" "),a("p",[e._v("Let's make sure "),a("code",[e._v("alice_ica")]),e._v(" has some "),a("code",[e._v("stake")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcSBiYW5rIGJhbGFuY2VzICRBTElDRV9JQ0EgLS1ob21lICRIT01FMQpnYWlhZCB0eCBiYW5rIHNlbmQgJEJPQiAkQUxJQ0VfSUNBIDEwMDBzdGFrZSAtLWZyb20gYm9iIC0tZ2FzLXByaWNlcyAwLjAyNXN0YWtlIC0taG9tZSAkSE9NRTEKZ2FpYWQgcSBiYW5rIGJhbGFuY2VzICRBTElDRV9JQ0EgLS1ob21lICRIT01FMQo="}}),e._v(" "),a("h3",{attrs:{id:"exercises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exercises"}},[e._v("#")]),e._v(" Exercises")]),e._v(" "),a("p",[e._v("We would like to invite you to try to perform the actions below yourself. If you're having issues, you can find the solutions at the bottom of this tutorial.")]),e._v(" "),a("blockquote",[a("p",[e._v("NOTE:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("alice")]),e._v(" = account on "),a("code",[e._v("test-0")])]),e._v(" "),a("li",[a("code",[e._v("alice_ica")]),e._v(" = account on "),a("code",[e._v("test-1")]),e._v(" owned by "),a("code",[e._v("alice")]),e._v(" on "),a("code",[e._v("test-0")])]),e._v(" "),a("li",[a("code",[e._v("bob")]),e._v(" = account on "),a("code",[e._v("test-1")])])])]),e._v(" "),a("p",[e._v("Q1: Let "),a("code",[e._v("alice")]),e._v(" send "),a("code",[e._v("stake")]),e._v(" to "),a("code",[e._v("bob")]),e._v(" (hint: using ICA)")]),e._v(" "),a("p",[e._v("Q2: Let "),a("code",[e._v("bob")]),e._v(" send "),a("code",[e._v("stake")]),e._v(" back to "),a("code",[e._v("alice_ica")]),e._v(" (hint: via the Bank module)")]),e._v(" "),a("p",[e._v("Q3: Let "),a("code",[e._v("alice")]),e._v(" send "),a("code",[e._v("stake")]),e._v(" to "),a("code",[e._v("bob")]),e._v(" (hint: via a regular IBC token transfer)")]),e._v(" "),a("p",[e._v("Q4: Let "),a("code",[e._v("bob")]),e._v(" send "),a("code",[e._v("ibc/stake")]),e._v(" to "),a("code",[e._v("alice_ica")]),e._v(" (hint: via the Bank module)")]),e._v(" "),a("p",[e._v("Q5: Let "),a("code",[e._v("alice_ica")]),e._v(" send "),a("code",[e._v("ibc/stake")]),e._v(" to "),a("code",[e._v("alice")]),e._v(" (hint: via ICA & IBC-Transfer)")]),e._v(" "),a("h3",{attrs:{id:"solutions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solutions"}},[e._v("#")]),e._v(" Solutions")]),e._v(" "),a("h4",{attrs:{id:"q1-alice-ica-sends-tokens-to-bob"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q1-alice-ica-sends-tokens-to-bob"}},[e._v("#")]),e._v(" Q1: "),a("code",[e._v("alice_ica")]),e._v(" sends tokens to "),a("code",[e._v("bob")])]),e._v(" "),a("p",[e._v("Both "),a("code",[e._v("alice_ica")]),e._v(" and "),a("code",[e._v("bob")]),e._v(" are on chain "),a("code",[e._v("test-1")]),e._v(", however, we need "),a("code",[e._v("alice")]),e._v(" from "),a("code",[e._v("test-0")]),e._v(" to sign the transaction, because "),a("code",[e._v("alice")]),e._v(" is the only account with access to "),a("code",[e._v("alice_ica")]),e._v(" over "),a("code",[e._v("icamuath")]),e._v(".")]),e._v(" "),a("p",[e._v("Step 1: generate the transaction json:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgdHggYmFuayBzZW5kICRBTElDRV9JQ0EgJEJPQiAtLWZyb20gYWxpY2UgMTAwc3Rha2UgLS1nZW5lcmF0ZS1vbmx5IC0taG9tZSAkSE9NRTEgfCBqcSAnLmJvZHkubWVzc2FnZXNbMF0nICZndDsgLi9zZW5kLXJhdy5qc29uCgpjYXQgc2VuZC1yYXcuanNvbgo="}}),e._v(" "),a("p",[e._v("This will generate and display a JSON file similar to this following file:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"ewogICZxdW90O0B0eXBlJnF1b3Q7OiAmcXVvdDsvY29zbW9zLmJhbmsudjFiZXRhMS5Nc2dTZW5kJnF1b3Q7LAogICZxdW90O2Zyb21fYWRkcmVzcyZxdW90OzogJnF1b3Q7Y29zbW9zMWcyYzNsOW03enB2d3NhMms0eXgwMDd6c254OWdtZTlxeXc4OXVjY3hmN2drdXM2ZWh5bHNha2x2MnkmcXVvdDssCiAgJnF1b3Q7dG9fYWRkcmVzcyZxdW90OzogJnF1b3Q7Y29zbW9zMWpsM3A2ZTYyZXk0eGFkOGM1eDB2aDRwMjZqNW1sOGVqeHI5MzZ0JnF1b3Q7LAogICZxdW90O2Ftb3VudCZxdW90OzogWwogICAgewogICAgICAmcXVvdDtkZW5vbSZxdW90OzogJnF1b3Q7c3Rha2UmcXVvdDssCiAgICAgICZxdW90O2Ftb3VudCZxdW90OzogJnF1b3Q7MTAwJnF1b3Q7CiAgICB9CiAgXQp9Cg=="}}),e._v(" "),a("p",[e._v("Step 2: Check the balance of Bob's account before the transfer, then send the generated transaction and let "),a("code",[e._v("alice")]),e._v(" sign it:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcSBiYW5rIGJhbGFuY2VzICRCT0IgLS1ob21lICRIT01FMQoKZ2FpYWQgdHggaWNhbWF1dGggc3VibWl0IC4vc2VuZC1yYXcuanNvbiAtLWNvbm5lY3Rpb24taWQgY29ubmVjdGlvbi0wIC0tZnJvbSBhbGljZSAtLWdhcy1wcmljZXMgMC4wMjVzdGFrZSAtLWhvbWUgJEhPTUUwCg=="}}),e._v(" "),a("p",[e._v("Step 3: check the balance of Bob's account after the transfer to make sure it went through:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcSBiYW5rIGJhbGFuY2VzICRCT0IgLS1ob21lICRIT01FMQo="}}),e._v(" "),a("h4",{attrs:{id:"q2-bob-sends-the-tokens-back-to-alice-ica"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q2-bob-sends-the-tokens-back-to-alice-ica"}},[e._v("#")]),e._v(" Q2: "),a("code",[e._v("bob")]),e._v(" sends the tokens back to "),a("code",[e._v("alice_ica")])]),e._v(" "),a("p",[e._v("Note that this transaction is just a regular coin transfer using the Bank module because both accounts exist on "),a("code",[e._v("test-1")]),e._v(" and you are interacting directly with that chain via the "),a("code",[e._v("--home")]),e._v(" flag.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgdHggYmFuayBzZW5kICRCT0IgJEFMSUNFX0lDQSAxMDBzdGFrZSAtLWdhcy1wcmljZXMgMC4wMjVzdGFrZSAtLWhvbWUgJEhPTUUxCg=="}}),e._v(" "),a("h4",{attrs:{id:"q3-alice-sends-tokens-to-bob-via-ibc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q3-alice-sends-tokens-to-bob-via-ibc"}},[e._v("#")]),e._v(" Q3: "),a("code",[e._v("alice")]),e._v(" sends tokens to "),a("code",[e._v("bob")]),e._v(" via IBC")]),e._v(" "),a("p",[e._v("Create a new IBC channel using Hermes:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"aGVybWVzIC0tY29uZmlnIC4vZG9jcy9tb2R1bGVzL2ljYW1hdXRoX3NjcmlwdHMvcmx5LWNvbmZpZy50b21sIGNyZWF0ZSBjaGFubmVsIC0tYS1jaGFpbiB0ZXN0LTAgLS1hLWNvbm5lY3Rpb24gY29ubmVjdGlvbi0wIC0tYS1wb3J0IHRyYW5zZmVyIC0tYi1wb3J0IHRyYW5zZmVyCg=="}}),e._v(" "),a("p",[e._v("Initiate the IBC token transfer:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgdHggaWJjLXRyYW5zZmVyIHRyYW5zZmVyIHRyYW5zZmVyIGNoYW5uZWwtMSAkQk9CIDIwMHN0YWtlIC0tZnJvbSBhbGljZSAtLWdhcy1wcmljZXMgMC4wMjVzdGFrZSAtLWhvbWUgJEhPTUUwCg=="}}),e._v(" "),a("p",[e._v("IBC token transfers can take a while before they're confirmed. You can check the balance of "),a("code",[e._v("bob")]),e._v(" on "),a("code",[e._v("test-1")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcSBiYW5rIGJhbGFuY2VzICRCT0IgLS1ob21lICRIT01FMQpiYWxhbmNlczoKLSBhbW91bnQ6ICZxdW90OzIwMCZxdW90OwogIGRlbm9tOiBpYmMvQzRDRkY0NkZENkRFMzVDQTRDRjRDRTAzMUU2NDNDOEZEQzlCQTRCOTlBRTU5OEU5QjBFRDk4RkUzQTIzMTlGOQotIGFtb3VudDogJnF1b3Q7OTk5OTk5OTkwMDAmcXVvdDsKICBkZW5vbTogc3Rha2UKcGFnaW5hdGlvbjoKICBuZXh0X2tleTogbnVsbAogIHRvdGFsOiAmcXVvdDswJnF1b3Q7Cg=="}}),e._v(" "),a("p",[e._v("Note how the "),a("code",[e._v("200stake")]),e._v(" received has changed its denom to "),a("code",[e._v("ibc/C4CFF46FD6DE35CA4CF4CE031E643C8FDC9BA4B99AE598E9B0ED98FE3A2319F9")]),e._v(". Tokens sending over IBC always are encoded with information about its origin in its denom.")]),e._v(" "),a("h4",{attrs:{id:"q4-let-bob-send-the-ibc-stake-it-just-received-to-alice-ica"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q4-let-bob-send-the-ibc-stake-it-just-received-to-alice-ica"}},[e._v("#")]),e._v(" Q4: Let "),a("code",[e._v("bob")]),e._v(" send the "),a("code",[e._v("ibc/stake")]),e._v(" it just received to "),a("code",[e._v("alice_ica")])]),e._v(" "),a("p",[e._v("Notice how this is just a regular token transfer using the Bank module. Also make sure the ibc denom is correct as it will be different for each chain.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"ZXhwb3J0IElCQ19ERU5PTT1pYmMvQzRDRkY0NkZENkRFMzVDQTRDRjRDRTAzMUU2NDNDOEZEQzlCQTRCOTlBRTU5OEU5QjBFRDk4RkUzQTIzMTlGOQpnYWlhZCB0eCBiYW5rIHNlbmQgJEJPQiAkQUxJQ0VfSUNBIDIwMCRJQkNfREVOT00gLS1mcm9tIGJvYiAtLWdhcy1wcmljZXMgMC4wMjVzdGFrZSAtLWhvbWUgJEhPTUUxCg=="}}),e._v(" "),a("h4",{attrs:{id:"q5-alice-ica-sends-100ibc-stake-to-alice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q5-alice-ica-sends-100ibc-stake-to-alice"}},[e._v("#")]),e._v(" Q5: "),a("code",[e._v("alice_ica")]),e._v(" sends "),a("code",[e._v("100ibc/stake")]),e._v(" to "),a("code",[e._v("alice")])]),e._v(" "),a("p",[e._v("we have already created the channel in the above [#Q3], we can just use this channel to send the token back from "),a("code",[e._v("alice_ica")]),e._v(" to "),a("code",[e._v("alice")]),e._v(".")]),e._v(" "),a("p",[e._v("Step 1: prepare the transaction JSON file:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgdHggaWJjLXRyYW5zZmVyIHRyYW5zZmVyIHRyYW5zZmVyIGNoYW5uZWwtMSAkQUxJQ0UgMTAwJElCQ19ERU5PTSAtLWZyb20gJEFMSUNFX0lDQSAtLWdlbmVyYXRlLW9ubHkgLS1ob21lICRIT01FMSB8IGpxICcuYm9keS5tZXNzYWdlc1swXScgJmd0OyBzZW5kLXJhdy5qc29uCgpjYXQgc2VuZC1yYXcuanNvbgo="}}),e._v(" "),a("p",[e._v("This will generate and display the following JSON file:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"ewogICZxdW90O0B0eXBlJnF1b3Q7OiAmcXVvdDsvaWJjLmFwcGxpY2F0aW9ucy50cmFuc2Zlci52MS5Nc2dUcmFuc2ZlciZxdW90OywKICAmcXVvdDtzb3VyY2VfcG9ydCZxdW90OzogJnF1b3Q7dHJhbnNmZXImcXVvdDssCiAgJnF1b3Q7c291cmNlX2NoYW5uZWwmcXVvdDs6ICZxdW90O2NoYW5uZWwtMSZxdW90OywKICAmcXVvdDt0b2tlbiZxdW90OzogewogICAgJnF1b3Q7ZGVub20mcXVvdDs6ICZxdW90O2liYy9DNENGRjQ2RkQ2REUzNUNBNENGNENFMDMxRTY0M0M4RkRDOUJBNEI5OUFFNTk4RTlCMEVEOThGRTNBMjMxOUY5JnF1b3Q7LAogICAgJnF1b3Q7YW1vdW50JnF1b3Q7OiAmcXVvdDsxMDAmcXVvdDsKICB9LAogICZxdW90O3NlbmRlciZxdW90OzogJnF1b3Q7Y29zbW9zMTN5czB2dzd1aHc1YzcwbHJneno2bnc3N2Y5NWsycG00MnJ0MzNhcmVnMzNrMGtsdG4yenNkanNmdnUmcXVvdDssCiAgJnF1b3Q7cmVjZWl2ZXImcXVvdDs6ICZxdW90O2Nvc21vczFzand3N3ZoeGhlNXNmeWU0NGZleDRmdjl0ZWxtdWFrdWFoazluaCZxdW90OywKICAmcXVvdDt0aW1lb3V0X2hlaWdodCZxdW90OzogewogICAgJnF1b3Q7cmV2aXNpb25fbnVtYmVyJnF1b3Q7OiAmcXVvdDsxJnF1b3Q7LAogICAgJnF1b3Q7cmV2aXNpb25faGVpZ2h0JnF1b3Q7OiAmcXVvdDs0MTMwJnF1b3Q7CiAgfSwKICAmcXVvdDt0aW1lb3V0X3RpbWVzdGFtcCZxdW90OzogJnF1b3Q7MTY0MTU3MjAzNzQ5MzUzNDAwMCZxdW90Owp9Cg=="}}),e._v(" "),a("p",[e._v("Step 2: use Interchain Accounts to execute the IBC transfer in the JSON file.\nDon't forget to confirm Alice's balance before and after the transfer to see the IBC denom disappear (it may take a moment for the entire sequence to complete):")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"Z2FpYWQgcSBiYW5rIGJhbGFuY2VzICRBTElDRV9JQ0EgLS1ob21lICRIT01FMQpnYWlhZCB0eCBpY2FtYXV0aCBzdWJtaXQgc2VuZC1yYXcuanNvbiAtLWNvbm5lY3Rpb24taWQgY29ubmVjdGlvbi0wIC0tZnJvbSBhbGljZSAtLWhvbWUgJEhPTUUwIC0tZ2FzLXByaWNlcyAwLjAyNXN0YWtlCmdhaWFkIHEgYmFuayBiYWxhbmNlcyAkQUxJQ0VfSUNBIC0taG9tZSAkSE9NRTEK"}}),e._v(" "),a("p",[e._v("The long denom we saw will be changed from "),a("code",[e._v("ibc/C4CFF46FD6DE35CA4CF4CE031E643C8FDC9BA4B99AE598E9B0ED98FE3A2319F9")]),e._v(" back to "),a("code",[e._v("stake")]),e._v(" when the token is back to a on chain "),a("code",[e._v("test-0")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://hermes.informal.systems/quick-start/installation.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Hermes installation"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/cosmos/interchain-accounts/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("Interchain Accounts tutorial"),a("OutboundLink")],1)])])],1)}),[],!1,null,null,null);t.default=o.exports}}]);